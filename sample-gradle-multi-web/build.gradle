plugins {
  id 'war'
  id 'eclipse-wtp'
  id 'jacoco'
  id "com.bmuschko.cargo" version "2.4"
}

dependencies {

    compile project(':sample-gradle-multi-shared')

    testCompile group: 'org.seleniumhq.selenium', name: 'selenium-java', version: '3.14.0'

    providedCompile fileTree(dir: "$localServerHome/modules/system/layers/base", include: '**/*.jar')

    def cargoVersion = '1.4.5'
    cargo "org.codehaus.cargo:cargo-core-uberjar:$cargoVersion",
          "org.codehaus.cargo:cargo-ant:$cargoVersion"
}

eclipse {

    wtp {
        component {
            contextPath  = contextPath
        }
    }
}

cargo {

    containerId = cargoContainerId
    port = Integer.parseInt(cargoPort)

    deployable {
        // ページを表示するためのURL：http://ホスト名/contextPath/ページ名
        //   例：http://localhost:8080/SampleWebApp/login.xhtml
        context = contextPath
    }

    local {
        // タスク：clean assemble cargoStopLocal cargoStartLocal
        // タスク：clean assemble cargoRedeployLocal
        homeDir = file(localServerHome) // プロジェクト内にサーバがあることを想定
        timeout = 60000
    }

    remote {
        // タスク：clean assemble cargoUndeployRemote cargoDeployRemote
        hostname = cargoHostName
        username = cargoHostUser
        password = cargoHostPassword
    }
}
